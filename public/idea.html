<!DOCTYPE html>
<html lang="en">
<head>
  <title>Ideabox</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="/css/bootstrap-grid.min.css">
  <link rel="stylesheet" href="/css/bootstrap.min.css">
  <link rel="stylesheet" href="/css/index.css">
  <link rel="stylesheet" type="text/css" href="/css/jquery-ui.css">
  <script src="/js/jquery-1.11.1.min.js"></script>
  <script src="/js/bootstrap.min.js"></script>
  <script src="/js/jquery-ui.js"></script>
  <script type="text/javascript">
  $(document).ready(function() {
	  $(function() {
            $( "#formdialog" ).dialog({
               autoOpen: false,
			   modal: true,
			   hide: "puff",
               show : "slide",
               width: 400    
            });
            $( "#opendialog" ).click(function() {
               $( "#formdialog" ).dialog( "open" );
            });
         });
    
});
  </script>
</head>
<body style="background-image:url(/images/bgimg.jpg); background-size:cover; background-repeat:no-repeat;">
<div>
<div class="heada"><h3>Ideabox<img src="/images/logo.gif" width="50px" height="50px" /></h3></div>
	<div class="row" style="padding-left:5%;">
    	<div style="border:1px solid red; width:25%; margin-right:5%; height:400px; box-shadow:; padding: 5px;">
        <h4> Profile </h4>
        <b id="userd"></b>
        
        
        <div style="text-align:center;"><button id="opendialog" class="btn btn-success">Add an Idea</button>&nbsp;&nbsp;<a href="/logout" ><button class="btn btn-success">Log Out</button></a></div>
        </div>
        <div style="border:1px solid red; width:60%">
        <h4> Ideas </h4>

        
        
        </div>
    
    
    </div>

    
    <div class="formcont" style=" margin-top:0px; margin-left:0px; width:500px; " id="formdialog" title=" Add an Idea ">
  <form method="post" action="/addidea/" class="userform" style="width:100%; ">
    <h4> <a href="/" ><b style="float:left;" class="activea"></b></a> </h4> <br><br>
      <div class="form-group">
    <input type="text" name="title" id="title" placeholder="Title" class="form-control" required>
        </div>
        <div class="form-group">
          <select class="form-control" id="category" name="category" required>
              <option>Category</option>
              <option>Technology</option>
              <option>Music</option>
              <option>Business</option>
          </select>
        </div>
        <div class="form-group">
        <textarea name="description" id="description" class="form-control" required> Description </textarea>
        </div>
        <input type="hidden" name="title" id="usertoken" placeholder="Title" class="form-control" required>
        <div class="form-group">
    <input type="submit" name="submit" value="Add" class="form-control btn btn-success" id="addbtn" disabled>
        </div>
  </form>
    </div>
   
    </div>
</div>
<script>	
  var i = window.localStorage.getItem('userid');
  document.getElementById('usertoken').value = i;
  $.ajax({
        type:"GET",
        url: "https://bc-21-noticeboard.firebaseio.com/-KhbI5UvglwvMw0zqAcU/Post.json"
    }).then(function(data) {
      var dat = JSON.stringify(data)
       //document.getElementById('userd').innerHTML = dat;
       //console.log(data);
    });
  document.getElementById('userd').innerHTML = i;

  // Add idea dialog box
	$("#addbtn").click(function(e){
    	event.preventDefault(e);
      var title = $("#title").val();
      var category = $("#category").val();
	    var description = $("#description").val();
      var userToken = $("#usertoken").val();  
        $.post('/addidea/',{title:title,category:category,description:description,usertoken:userToken}, function(r){
			
          alert(r);
          
        } );
		
		$("#formdialog").dialog('close');

    });
  // Add idea dialog box
  //validating idea dialog box
	function valid(){
		var title = $("#title").val();
    var category = $("#category").val();
	  var description = $("#description").val();
		if ((title != " " && category != " ") && (description != " "))
		{
			$("#addbtn").removeAttr("disabled");
		}
		else{
			$("#addbtn").attr("disable",true);
		}
	}
	$("#title").blur( function (){
		valid();
	});
	$("#category").change( function (){
		valid();
	});
	$("#description").keypress( function (){
		valid();
	});
	$("#description").blur( function (){
		valid();
	});
  
//validating idea dialog box

</script>
</body>
</html>